<html>
    <head>
        <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
        <script src="../JS/checkAutenticato.js"></script>
        <script>
            $("document").ready(function(){
                $("#cercaCliente").click(function(){
                    cercaCliente();
                });

                $("#salva").click(function(){
                    salvaTicket();
                });
            });

            function cercaCliente(){
                let codCliente = $("#codCliente").val();

                $.ajax({
                    type: "POST",
                    url: "../PHP/cercaCliente.php",
                    data: {codCliente: codCliente},
                    success: function(response){
                        if(response["status"] == "200"){
                            modificaDatiCliente(response["nome"], response["cognome"], response["telefono"], response["email"]);
                        }
                    }
                });
            }

            function modificaDatiCliente(nome, cognome, telefono, email){
                $("#nome").val(nome);
                $("#cognome").val(cognome);
                $("#telefono").val(telefono);
                $("#email").val(email);
            }

            function salvaTicket(){
                $.ajax({
                    type: "POST",
                    url: "../PHP/inserimentoTicket.php",
                    data: {},
                    success: function(response){
                        if(response["status"] == "200"){
                            alert(response["message"]);
                        }
                        else{
                            alert(response["status"] + ": " + response["message"]);
                        }
                    }
                });
            }
        </script>

    </head>
    <body>
        richiesta assistenza per area:<br>
        <select id="area">
            <option value="Area PC e reti">Area PC e reti</option>
            <option value="AS400">AS400</option>
            <option value="Java">Java</option>
            <option value="Contabilita">Contabilit√†</option>
            <option value="Formatori">Formatori</option>
            <option value="Derma">Derma</option>
            <option value="Terzisti">Terzisti</option>
            <option value="Commerciali">Commerciali</option>
        </select><br><br>

        codice cliente:<br>
        <input type="text" id="codCliente"><button id="cercaCliente">Cerca</button><br><br>

        nome cliente:<br>
        <input type="text" id="nome"><br><br>

        cognome cliente:<br>
        <input type="text" id="cognome"><br><br>

        telefono cliente:<br>
        <input type="text" id="telefono"><br><br>

        email cliente:<br>
        <input type="text" id="email"><br><br>

        data e ora apertura:<br>
        <input type="date" id="data">
        <input type="time" id="ora"><br><br>

        <button id="salva">salva ticket</button>
    </body>
</html>